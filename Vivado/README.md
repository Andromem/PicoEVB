# Vivado Projects

To get started with the Vivado project you need Vivado 2017.2.

## Getting Started
- Open Vivado
- In TCL prompt, change directory to desired FPGA project (e.g. nanoevb)
- source project.tcl

Once Vivado is done loading project, you can edit project or simply
run synthesis and implementation

## Nanoevb
- Implements DMA for PCIe IP
- 8kB BRAM connected to DMA port
- Sanity check constant 0xDEADBEEF on AXI-Lite interface

### To generate config file for onboard flash (run from vivado dir)
write_cfgmem  -format mcs -size 4 -interface SPIx4 -loadbit {up 0x00000000 "./nanoevb/nanoevb/nanoevb.runs/impl_1/project_bd_wrapper.bit" } -file "../FPGA-bitfiles/Gen2/Gen2.mcs"

### Project / upgrade info
Controlled files:
- project.tcl: This was originally generated by vivado, but it has some “custom” changes. So it needs to be hand maintained.
- Project_bd.tcl: This is simply saved from the block diagram (```write_bd_tcl -force project_bd.tcl```)
 
Since the project_bd.tcl requires Vivado 2017.2 (exactly), if you want to upgrade to a new version you need to do something like:
- Use old version to open and build project
- Close old version of vivdao
- Open built project in new version of vivado (directly, not using *.tcl file)
- Upgrade all the IP to latest version of vivado
- write_bd_tcl from new version of vivado 
